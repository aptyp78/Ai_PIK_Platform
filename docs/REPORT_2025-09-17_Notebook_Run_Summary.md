# Отчёт по запуску ноутбука (Grounded_DINO_SAM2_Detection_v2)

Время (UTC): 2025-09-17 17:32:38Z

## 1) Синхронизация ноутбука
- Файл, синхронизированный с удалённого сервера с приоритетом удалённой версии:
  - notebooks/Grounded_DINO_SAM2_Detection_v2.ipynb
- Способ: scp с сервера (ssh5.vast.ai:34162) → локальный репозиторий; затем git commit/push; на удалёнке выполнен git pull.

## 2) Проверка результатов (состояние артефактов)
- Детект (CV, страницы 42/45):
  - out/visual/cv_regions/42/regions — 7 регионов
  - out/visual/cv_regions/45/regions — 11 регионов
- Анализ (gpt‑4o) → facts/captions для всех регионов
- Инжест:
  - out/openai_embeddings.ndjson — +28 визуальных записей (текущий прогон)
- Обзор:
  - eval/visual_review.html — сгенерирован и доступен на сервере и в репозитории
- Метрики (после текущего прогона, без переиндексации текста):
  - recall@1 = 0.000
  - recall@3 = 0.013
  - recall@5 = 0.038
  - ndcg@1 = 0.000
  - ndcg@3 = 0.004
  - ndcg@5 = 0.009
  - MRR = 0.035 (78 аннотированных запросов)

## 3) Рекомендации и следующие шаги
- Переключить ноутбук на GroundedDINO+SAM2 (USE_CV=False) и повторить прогон страниц 42/45 (требуется внедрить реальный пайплайн в `scripts/grounded_sam_detect.py`).
- Пересобрать текстовый индекс (scripts/rebuild_index.py) и сравнить метрики «до/после» для баланса между текстом и визуальными фактами.
- Зафиксировать совместимые версии Torch/Torchvision при подключении SAM‑2 (или обновить до 2.5.x, если потребуется).
